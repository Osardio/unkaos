import{o as _,c as f,w as D,v as X,a,r as m,b as p,F as v,d as w,e as T,n as z,t as B,f as A,g as de,h as C,i as G,j as Q,k as O,l as Y,m as ue,p as re,q as _e,s as ce}from"./vendor.2bcadc1a.js";const fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};fe();var y=(e,t)=>{const s=e.__vccOpts||e;for(const[l,o]of t)s[l]=o;return s};const pe={props:{name:{type:String,default:""},collumns:{type:Array,default:()=>["name"]}},data(){return{searchinput:""}},watch:{searchinput:function(e,t){this.$store.dispatch("filter_"+this.name,{val:e,collumns:this.collumns})}}},me={class:"search"};function he(e,t,s,l,o,i){return _(),f("div",me,[D(a("input",{class:"search-input",type:"text",placeholder:"\u041F\u043E\u0438\u0441\u043A...","onUpdate:modelValue":t[0]||(t[0]=u=>o.searchinput=u)},null,512),[[X,o.searchinput]])])}var ge=y(pe,[["render",he]]);const h={};h.str_contains=function(e,t){return e=e.toString().toLowerCase(),t=t.toString().toLowerCase(),e.indexOf(t)>-1};h.row_contains=function(e,t,s){(s==null||s==[])&&(s=Object.keys(e));for(let l in s)if(h.str_contains(e[s[l]],t))return!0;return!1};h.filter_data=function(e,t,s){return e.filter(function(l){return h.row_contains(l,t,s)})};h.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))};h.obj_clone=function(e){return JSON.parse(JSON.stringify(e))};h.clone_obj=function(e){return JSON.parse(JSON.stringify(e))};h.obj_length=function(e){return Object.keys(e).length};h.obj_join=function(e,t){for(let s in t)e[s]!==t[s]&&(e[s]=h.obj_clone(t[s]));return e};h.obj_attr_by_path=function(e,t){let s=t.split("."),l=e;console.log("j",s,l);for(let o in s)if(l=l[s[o]],l==null)return"";return l};h.compare_obj=function(e){return function(t,s){console.log(t,s,e);let l=t[e].toLowerCase(),o=s[e].toLowerCase();return l<o?-1:l>o?1:0}};h.readUploadedFileAsImg=e=>{const t=new FileReader;return new Promise((s,l)=>{t.onerror=()=>{t.abort(),l(new DOMException("Problem parsing input file."))},t.onload=()=>{s(t.result)},console.log(e),t.readAsDataURL(e)})};const ve={props:{name:{type:String,default:""},func:{type:String,default:""}},methods:{click(e){this.func!=null&&this.$store.dispatch(this.func)}}},be={class:"btn"},ye=["value"];function $e(e,t,s,l,o,i){return _(),f("div",be,[a("input",{class:"btn_input",type:"button",value:s.name,onClick:t[0]||(t[0]=u=>i.click(this))},null,8,ye)])}var x=y(ve,[["render",$e]]);const we={components:{SearchInput:ge,KButton:x},props:{buttons:{type:Array,default:()=>[{name:"\u043A\u043D\u043E\u043F\u043A\u0430 1",func:""}]},name:{type:String,default:""},collumns:{type:Array,default:()=>[]},bgColor:{type:String,default:"rgb(35, 39, 43)"},secondaryColor:{type:String,default:"#1d1b31"},homeSectionColor:{type:String,default:"#e4e9f7"},logoTitleColor:{type:String,default:"#fff"},iconsColor:{type:String,default:"#fff"},itemsTooltipColor:{type:String,default:"#e4e9f7"},menuItemsHoverColor:{type:String,default:"#fff"},menuItemsTextColor:{type:String,default:"#fff"},menuFooterTextColor:{type:String,default:"#fff"}},computed:{cssVars(){return console.log("col1",this.collumns),{"--bg-color":this.bgColor,"--secondary-color":this.secondaryColor,"--home-section-color":this.homeSectionColor,"--logo-title-color":this.logoTitleColor,"--icons-color":this.iconsColor,"--items-tooltip-color":this.itemsTooltipColor,"--menu-items-hover-color":this.menuItemsHoverColor,"--menu-items-text-color":this.menuItemsTextColor,"--menu-footer-text-color":this.menuFooterTextColor}}}},Ae={style:{display:"flex","flex-direction":"row","flex-grow":"1","max-height":"calc(100% - 60px)"}};function ke(e,t,s,l,o,i){const u=m("SearchInput"),n=m("KButton");return _(),f("div",{class:"topbar",style:z(i.cssVars)},[a("div",Ae,[p(u,{name:s.name,collumns:s.collumns},null,8,["name","collumns"]),(_(!0),f(v,null,w(s.buttons,(d,r)=>(_(),T(n,{key:r,name:d.name,func:d.func},null,8,["name","func"]))),128))])],4)}var V=y(we,[["render",ke]]);const Se={methods:{sort(e){for(let t in this.collumns)this.collumns[t].id==e.id?this.collumns[t].asc?(this.collumns[t].desc=!0,this.collumns[t].asc=!1):(this.collumns[t].desc=!1,this.collumns[t].asc=!0):this.collumns[t].asc=this.collumns[t].desc=!1;this.$store.dispatch("sort_"+this.name,e.id)},select_row(){let e=event.path[1].getAttribute("uuid");this.$store.commit("select_"+this.name,e)},get_json_val:h.obj_attr_by_path,format_val(e,t){let s=t.type,l=this.get_json_val(e,t.id);if(console.log("fff",l),s==null)return l;if(s=="date"){var o={year:"numeric",month:"numeric",day:"numeric",timezone:"Moscow"};return new Date(l).toLocaleString("ru",o)}if(s=="boolean")return l=="true"||l==!0||l=="t"?"&#10004;":"&#10006;";if(s=="user"){let i;return e.avatar!=null?i=e.avatar:i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAe9JREFUSEvlVtFRHTEQkyqADggVABWEdAAdQAVABSQVABWkBOgAqACoAEqACsRoZp05fPZ5j8kMH+zPvbnzW3m18srEFwW/CBefApa0D2AnNv1I8n5tAauAJR0A+AtgswJ6BXBM8ia7gTSwpEsAJ4PEZyS9bhgp4KD2NrKZVie/I/kaLJwC+Bnff5G8GyFngR+jp08kd1tJJb0A2ALgnu/9L2BFoi6Vkn4DOPc6ksOChgsqmrs0ZtcVJjLAPwA8xx8Oe8qVdBSK99Jtkqa+G0Ng/1OSj8sGgCuSFtIsJqp/I1kft9n6LPD0KM3ormjubm6KngV2BT4iZVr5t5VuJjxUitK7qq9LTgEH3e61J1MBr3P5fB+NepsWV51dkns8rdKV32Qn1qeBR4Mh+z1FtST30BT72Zxc0XNX7z77uRiLwJIsKruRqV0T1oLdyuJrRhe4Y4FvUVkrmZnwWS+xaJVN4KD2YZLkyo40UqwkK9/im9rnXov6HnBxI1d4kLG5KQXB1nW8a7rVDHjqMgDSxt45dhfx/g9Ju9e/aAF7KtnU01OoJyBJhbl7kr6nLQIX753tco2svXbJoz9UXImqa4HZDVS9/iCyGth0lLtV6u60tImly0EN7IFRJpPV2B0AmapjADXzpUZmBmTtmu8H/A4J79EfjfUqWAAAAABJRU5ErkJggg==",l='<div class=user><img src="'+i+'">'+l+"</div>",l}return l}},props:{name:{type:String,default:""},collumns:{type:Array,default:()=>[{name:"\u0441\u0442\u043E\u043B\u0431\u0435\u0446 1",id:"aa"},{name:"\u0441\u0442\u043E\u043B\u0431\u0435\u0446 2",id:"bb"},{name:"\u0441\u0442\u043E\u043B\u0431\u0435\u0446 3",id:"cc"},{name:"\u0441\u0442\u043E\u043B\u0431\u0435\u0446 4",id:"dd"}]},tableData:{default:()=>[{aa:"11",bb:"12",cc:"13",dd:"14"},{aa:"21",bb:"22",cc:"23",dd:"24"}]}}},Be={class:"ktable"},xe=["onClick"],Te=["uuid"],Me=["innerHTML"];function Ke(e,t,s,l,o,i){return _(),f("div",Be,[a("table",null,[a("thead",null,[a("tr",null,[(_(!0),f(v,null,w(s.collumns,(u,n)=>(_(),f("th",{key:n,onClick:d=>i.sort(u)},[a("label",null,B(u.name),1),a("label",{class:A(["sort_arrow",{sorted_asc:u.asc}])},"\u25BC",2),a("label",{class:A(["sort_arrow",{sorted_desc:u.desc}])},"\u25B2",2)],8,xe))),128))])]),a("tbody",null,[(_(!0),f(v,null,w(s.tableData,(u,n)=>(_(),f("tr",{key:n,uuid:u.uuid,class:A({selected_row:u.selected})},[(_(!0),f(v,null,w(s.collumns,(d,r)=>(_(),f("td",{key:r,onClick:t[0]||(t[0]=c=>i.select_row(c)),innerHTML:i.format_val(u,d)},null,8,Me))),128))],10,Te))),128))])])])}var M=y(Se,[["render",Ke]]);const je={props:{disabled:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:""},id:{type:String,default:""},parent_name:{type:String,default:""}},watch:{value:function(e,t){console.log(e,t,this.id,this.parent_name);let s={};s[this.id]=e,this.$store.commit("push_update_"+this.parent_name,s)}}},Ie={class:"string"},Le={class:"label"},Ce=["disabled"];function Ve(e,t,s,l,o,i){return _(),f("div",Ie,[a("div",Le,B(s.label),1),D(a("input",{class:"string-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),disabled:s.disabled},null,8,Ce),[[X,s.value]])])}var K=y(je,[["render",Ve]]);const Je={props:{label:{type:String,default:"label"},value:{type:Boolean,default:!0},id:{type:String,default:""},parent_name:{type:String,default:""}},watch:{value:function(e,t){console.log(e,t,this.id,this.parent_name);let s={};s[this.id]=e}}},Pe={class:"boolean"},Oe={class:"label"},De=a("span",{class:"boolean-input"},null,-1);function qe(e,t,s,l,o,i){return _(),f("label",Pe,[a("div",Oe,B(s.label),1),D(a("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u)},null,512),[[de,s.value]]),De])}var j=y(Je,[["render",qe]]);const Ee={props:{label:{type:String,default:"label"},value:{type:String,default:""},id:{type:String,default:""},parent_name:{type:String,default:""}},methods:{get_src:function(e){return e||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAe9JREFUSEvlVtFRHTEQkyqADggVABWEdAAdQAVABSQVABWkBOgAqACoAEqACsRoZp05fPZ5j8kMH+zPvbnzW3m18srEFwW/CBefApa0D2AnNv1I8n5tAauAJR0A+AtgswJ6BXBM8ia7gTSwpEsAJ4PEZyS9bhgp4KD2NrKZVie/I/kaLJwC+Bnff5G8GyFngR+jp08kd1tJJb0A2ALgnu/9L2BFoi6Vkn4DOPc6ksOChgsqmrs0ZtcVJjLAPwA8xx8Oe8qVdBSK99Jtkqa+G0Ng/1OSj8sGgCuSFtIsJqp/I1kft9n6LPD0KM3ormjubm6KngV2BT4iZVr5t5VuJjxUitK7qq9LTgEH3e61J1MBr3P5fB+NepsWV51dkns8rdKV32Qn1qeBR4Mh+z1FtST30BT72Zxc0XNX7z77uRiLwJIsKruRqV0T1oLdyuJrRhe4Y4FvUVkrmZnwWS+xaJVN4KD2YZLkyo40UqwkK9/im9rnXov6HnBxI1d4kLG5KQXB1nW8a7rVDHjqMgDSxt45dhfx/g9Ju9e/aAF7KtnU01OoJyBJhbl7kr6nLQIX753tco2svXbJoz9UXImqa4HZDVS9/iCyGth0lLtV6u60tImly0EN7IFRJpPV2B0AmapjADXzpUZmBmTtmu8H/A4J79EfjfUqWAAAAABJRU5ErkJggg=="},preview_files:async function(e){const t=await h.readUploadedFileAsImg(e.target.files[0]);console.log(t);let s={};s[this.id]=t,this.$store.commit("push_update_"+this.parent_name,s),console.log(e.path[1].children[2].src=t)}},watch:{value:function(e,t){console.log("vch",e,t,this.id,this.parent_name);let s={};s[this.id]=e,this.$store.commit("push_update_"+this.parent_name,s)}}},Ne={class:"avatar"},Ue={class:"label"},Fe=["src"];function Re(e,t,s,l,o,i){return _(),f("label",Ne,[a("div",Ue,B(s.label),1),a("input",{type:"file",accept:"image/*",onChange:t[0]||(t[0]=(...u)=>i.preview_files&&i.preview_files(...u))},null,32),a("img",{class:"avatar-input",src:i.get_src(s.value)},null,8,Fe)])}var J=y(Ee,[["render",Re]]);const We={props:{disabled:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:""},id:{type:String,default:""},parent_name:{type:String,default:""}},methods:{format(e){var t={year:"numeric",month:"numeric",day:"numeric",timezone:"Moscow"};let s=new Date(e).toLocaleString("ru",t);return s!=="Invalid Date"?s:""}},watch:{value:function(e,t){console.log(e,t,this.id,this.parent_name);let s={};s[this.id]=e,this.$store.commit("push_update_"+this.parent_name,s)}}},He={class:"string"},Xe={class:"label"},Ze=["value","disabled"];function ze(e,t,s,l,o,i){return _(),f("div",He,[a("div",Xe,B(s.label),1),a("input",{class:"string-input",type:"text",value:i.format(s.value),disabled:s.disabled},null,8,Ze)])}var P=y(We,[["render",ze]]);const k={};k.base_url="http://localhost:3001/";k.dict={read:"get",update:"put",create:"post",delete:"delete",upsert:"post"};k.headers={"content-type":"application/json"};k.run_method=async function(e,t){e=e.replace("create","upsert").replace("update","upsert");const s={method:k.dict[e.split("_")[0]],headers:k.headers};t!=null&&(s.body=JSON.stringify(t));const o=await(await fetch(this.base_url+e,s)).json();return o[1]!=null?o[1].rows:o.rows};const S={};S.dict={r:"get",u:"update",c:"create",d:"delete"};S.create_module=function(e,t){let s={};s[e]=[],s["filtered_"+e]=[],s["selected_"+e]={},s["updated_"+e]={},s["sorted_"+e]={collumn_name:!1,reverse:!1};const l=function(){return s},o={};o["get_"+e]=function(n){return n["filtered_"+e]},o["selected_"+e]=function(n){return n["selected_"+e]},o[e+"_num_by_uuid"]=function(n){return function(d){for(let r in n[e])if(n[e][r].uuid==d)return r}},o["filtered_"+e+"_num_by_uuid"]=function(n){return function(d){for(let r in n["filtered_"+e])if(n["filtered_"+e][r].uuid==d)return r}};const i={};i["get_"+e]=function(n,d){n[e]=d,n["filtered_"+e]=h.clone_obj(d)},i["filter_"+e]=function(n,d){n["filtered_"+e]=d},i["select_"+e]=function(n,d){for(let r in n["filtered_"+e])n["filtered_"+e][r].uuid==d?(n["selected_"+e]=n["filtered_"+e][r],n["filtered_"+e][r].selected=!0):n["filtered_"+e][r].selected=!1;n["updated_"+e]={}},i["push_update_"+e]=function(n,d){d.uuid!==void 0&&n["selected_"+e].uuid!=d.uuid||(n["updated_"+e]=h.clone_obj(d),n["selected_"+e]=h.obj_join(n["selected_"+e],d))},i["create_"+e]=function(n,d){n[e].push(d),n["filtered_"+e].push(d),this.commit("select_"+e,d.uuid)},i["update_"+e]=function(n){let d=n["selected_"+e].uuid,r=this.getters[e+"_num_by_uuid"](d),c=this.getters["filtered_"+e+"_num_by_uuid"](d);for(let g in n["updated_"+e])JSON.stringify(n[e][r][g])!=JSON.stringify(n["updated_"+e][g])?(console.log("uuu",e,n[e][r][g],`\r
`,n["updated_"+e][g]),n[e][r][g]=n["updated_"+e][g],n["filtered_"+e][c][g]=n["updated_"+e][g],n["selected_"+e][g]=n["updated_"+e][g]):delete n["updated_"+e][g]},i["unselect_"+e]=function(n){console.log("iiiii",n["instance_"+e]),n["selected_"+e]=h.obj_clone(n["instance_"+e]),n["updated_"+e]=h.obj_clone(n["instance_"+e]);for(let d in n["filtered_"+e])n["filtered_"+e][d].selected=!1},i["delete_"+e]=function(n){let d=n["selected_"+e].uuid,r=this.getters[e+"_num_by_uuid"](d),c=this.getters["filtered_"+e+"_num_by_uuid"](d);n[e].splice(r,1),n["filtered_"+e].splice(c,1),this.commit("unselect_"+e)},i["sort_"+e]=function(n,d){console.log("lllll",d),n["sorted_"+e].collumn==d?n["sorted_"+e].reverse=!n["sorted_"+e].reverse:(n["sorted_"+e].order=!1,n["sorted_"+e].collumn=d),n["filtered_"+e].sort(h.compare_obj(d)),n["sorted_"+e].reverse&&n["filtered_"+e].reverse()};const u={};return u["get_"+e]=async function(){const n=await k.run_method("read_"+e);this.commit("get_"+e,n)},u["filter_"+e]=async function(n,{val:d,collumns:r}){let c=h.filter_data(n.state[e],d,r);this.commit("filter_"+e,c)},u["upsert_"+e]=async function(n){k.run_method("upsert_"+e,n.state["selected_"+e])},u["create_"+e]=async function(n){this.commit("create_"+e,n.state["selected_"+e]);let d=await k.run_method("create_"+e,n.state["selected_"+e]);n.state["updated_"+e]=d[0],this.commit("update_"+e)},u["update_"+e]=async function(n){this.commit("update_"+e),console.log("u",n.state["selected_"+e]),k.run_method("update_"+e,n.state["selected_"+e])},u["save_"+e]=async function(n){const d=n.state["selected_"+e]==null||n.state["selected_"+e].uuid==null||n.state["selected_"+e].is_new;console.log("is_new",d),n.state["selected_"+e].is_new=!1,d?this.dispatch("create_"+e):this.dispatch("update_"+e)},u["delete_"+e]=async function(n){console.log(n.state["selected_"+e]),n.state["selected_"+e]==null||n.state["selected_"+e].uuid==null?this.commit("unselect_"+e):(k.run_method("delete_"+e,n.state["selected_"+e]),this.commit("delete_"+e))},u["unselect_"+e]=async function(n){this.commit("unselect_"+e)},u["sort_"+e]=async function(n,d){this.commit("sort_"+e,d)},{state:l,getters:o,mutations:i,actions:u}};const I={};I.create_module=function(e,t,s,l,o,i){const u=function(){this.$store.state[e]||this.$store.registerModule(e,o)},n={};n[e]=function(){return this.$store.getters["get_"+e]},n["selected_"+e]=function(){return this.$store.getters["selected_"+e]};const d=async function(){await this.$store.dispatch("get_"+e);let g={};this.instance!==void 0&&(g=h.obj_clone(this.instance)),g.uuid=h.uuidv4(),g.is_new=!0,this.$store.state[e]["selected_"+e]=g,this.$store.state[e]["instance_"+e]=h.obj_clone(g)},r=function(){return s},c={get_json_val:h.obj_attr_by_path};return{components:l,created:d,computed:n,data:r,beforeCreate:u,props:i,methods:c}};const E="users",ee="crud",Ge=S.create_module(E,ee),Qe=[{name:"\u0424\u0418\u041E",id:"name",type:"user"},{name:"\u041B\u043E\u0433\u0438\u043D",id:"login"},{name:"\u041F\u043E\u0447\u0442\u0430",id:"mail"},{name:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",id:"active",type:"boolean"},{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"date"}],Ye=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",func:"unselect_"+E}],et=["name","login","mail"],tt={inputs:{type:Array,default:()=>[{label:"\u0424\u0418\u041E",id:"name",type:"String"},{label:"\u041B\u043E\u0433\u0438\u043D",id:"login",type:"String"},{label:"\u0410\u0434\u0440\u0435\u0441 \u043F\u043E\u0447\u0442\u044B",id:"mail",type:"String"},{label:"\u0410\u043A\u0442\u0438\u0432\u0435\u043D",id:"active",type:"Boolean"},{label:"\u0410\u0432\u0430\u0442\u0430\u0440",id:"avatar",type:"Avatar"},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"Date",disabled:!0}]}},st={collumns:Qe,buttons:Ye,name:E,search_collumns:et},nt={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x},ot=I.create_module(E,ee,st,nt,Ge,tt),lt=ot,it={id:"users_down_panel"},at={id:"users_table_panel"},dt={id:"users_card"},ut={id:"users_card_footer_div"},rt={id:"users_card_infooter_div"};function _t(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",it,[a("div",at,[p(n,{collumns:e.collumns,"table-data":e.users,name:"users"},null,8,["collumns","table-data"])]),a("div",dt,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.selected_users[r.id],parent_name:"users",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",ut,[a("div",rt,[p(d,{id:"save_users_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_users"}),p(d,{id:"delete_users_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_users"})])])])])],64)}var ct=y(lt,[["render",_t]]);const N="fields",te="crud",ft=S.create_module(N,te),pt=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name"},{name:"\u0422\u0438\u043F",id:"type[0].name"},{name:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435",id:"is_custom",type:"boolean"},{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"date"}],mt=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043E\u043B\u0435",func:"unselect_"+N}],ht=["name","short_name"],gt={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"},{label:"\u0422\u0438\u043F",id:"type.0.name",type:"String"},{label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435",id:"is_custom",type:"Boolean"},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043E",id:"created_at",type:"Date",disabled:!0}]}},vt={collumns:pt,buttons:mt,name:N,search_collumns:ht},bt={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x},yt=I.create_module(N,te,vt,bt,ft,gt),$t=yt,wt={id:"fields_down_panel"},At={id:"fields_table_panel"},kt={id:"fields_card"},St={id:"fields_card_footer_div"},Bt={id:"fields_card_infooter_div"};function xt(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",wt,[a("div",At,[p(n,{collumns:e.collumns,"table-data":e.fields,name:"fields"},null,8,["collumns","table-data"])]),a("div",kt,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.get_json_val(e.selected_fields,r.id),parent_name:"fields",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",St,[a("div",Bt,[p(d,{id:"save_fields_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_fields"}),p(d,{id:"delete_fields_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_fields"})])])])])],64)}var q=y($t,[["render",xt]]);const U="projects",se="crud",Tt=S.create_module(U,se),Mt=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"user"},{name:"\u041A\u043E\u0434",id:"short_name"},{name:"\u0412\u043B\u0430\u0434\u0435\u043B\u0435\u0446",id:"owner.0.name"},{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"date"}],Kt=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u043E\u0435\u043A\u0442",func:"unselect_"+U}],jt=["name","short_name"],It={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"},{label:"\u041A\u043E\u0434",id:"short_name",type:"String"},{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",id:"description",type:"String"},{label:"\u0410\u0432\u0430\u0442\u0430\u0440",id:"avatar",type:"Avatar"},{label:"\u0412\u043B\u0430\u0434\u0435\u043B\u0435\u0446",id:"owner.0.name",type:"String",disabled:!0},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"Date",disabled:!0}]}},Lt={collumns:Mt,buttons:Kt,name:U,search_collumns:jt},Ct={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x},Vt=I.create_module(U,se,Lt,Ct,Tt,It),Jt=Vt,Pt={id:"projects_down_panel"},Ot={id:"projects_table_panel"},Dt={id:"projects_card"},qt={id:"projects_card_footer_div"},Et={id:"projects_card_infooter_div"};function Nt(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",Pt,[a("div",Ot,[p(n,{collumns:e.collumns,"table-data":e.projects,name:"projects"},null,8,["collumns","table-data"])]),a("div",Dt,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.get_json_val(e.selected_projects,r.id),parent_name:"projects",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",qt,[a("div",Et,[p(d,{id:"save_projects_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_projects"}),p(d,{id:"delete_projects_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_projects"})])])])])],64)}var Ut=y(Jt,[["render",Nt]]);const b={};b.curve_angle=10;b.curve_deviation=.2;b.dist=function(e,t){let s=t.x-e.x,l=t.y-e.y;return Math.sqrt(s*s+l*l)};b.deg_to_rad=function(e){return e*Math.PI/180};b.rotate_pnt=function(e,t,s){return s=b.deg_to_rad(s),{x:Math.round(e.x+(t.x-e.x)*Math.cos(s)-(t.y-e.y)*Math.sin(s)),y:Math.round(e.y+(t.x-e.x)*Math.sin(s)+(t.y-e.y)*Math.cos(s))}};b.cut_radius=function(e,t,s){let l=this.dist(e,t),o=s/l;return[{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o},{x:e.x+(t.x-e.x)*(1-o),y:e.y+(t.y-e.y)*(1-o)}]};b.calc_curve_mid_pnt=function(e,t){return{x:e.x+(t.x-e.x)*.5+(t.y-e.y)*b.curve_deviation,y:e.y+(t.y-e.y)*.5+(e.x-t.x)*b.curve_deviation}};b.get_straight_arrow_str=function(e,t){return"M"+e.x+","+e.y+"L"+t.x+","+t.y};b.get_curve_arrow_str=function(e,t,s){return"M"+e.x+","+e.y+"Q"+t.x+","+t.y+","+s.x+","+s.y};b.calc_edge_d=function(e,t,s,l){let[o,i]=b.cut_radius(e,t,s);if(!l)return b.get_straight_arrow_str(o,i);o=b.rotate_pnt(e,o,-b.curve_angle),i=b.rotate_pnt(t,i,b.curve_angle);let u=b.calc_curve_mid_pnt(o,i);return b.get_curve_arrow_str(o,u,i)};const Ft={components:{StringInput:K,BooleanInput:j,KButton:x,KTable:M},data(){return{selected:{},dragging_all:!1,issue_statuses_collumns:[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name"}]}},methods:{get_node_by_uuid(e){for(let t in this.wdata.workflow_nodes)if(this.wdata.workflow_nodes[t].issue_statuses[0].uuid===e)return this.wdata.workflow_nodes[t]},get_edge_by_uuids(e){let[t,s]=e.split(",");for(let l in this.wdata.transitions){let o=this.wdata.transitions[l];if(o.status_from_uuid===t&&o.status_to_uuid==s)return o}},calc_edge_d(e,t){let s=this.get_node_by_uuid(e.status_from_uuid),l=this.get_node_by_uuid(e.status_to_uuid);return s===void 0||l===void 0?"":b.calc_edge_d(s,l,this.node_radius,t)},are_bidirectional(e,t){return e.status_from_uuid==t.status_to_uuid&&e.status_to_uuid==t.status_from_uuid&&e.uuid!=t.uuid},calc_are_bidirectional_edges(){let e={};for(let t in this.wdata.transitions){e[t]=!1;for(let s in this.wdata.transitions)this.are_bidirectional(this.wdata.transitions[t],this.wdata.transitions[s])&&(e[t]=e[s]=!0)}return e},update_edges(e){let t=this.calc_are_bidirectional_edges();for(let s in this.wdata.transitions){let l=this.wdata.transitions[s];if(l.status_from_uuid!=e&&l.status_to_uuid!=e&&e!=null)continue;l.d=this.calc_edge_d(l,t[s]),this.$refs[l.status_from_uuid+","+l.status_to_uuid][0].setAttribute("d",l.d)}},select_node(e){let t=event.path[1];this.selected={node:this.get_node_by_uuid(t.getAttribute("uuid"))}},select_edge(e){let t=event.path[0];this.selected={edge:this.wdata.transitions[t.getAttribute("idx")]}},node_mousedown(e){this.dragging_all=!1;let t=event.path[1].getAttribute("uuid"),s=this.get_node_by_uuid(t);if(this.$refs.is_edge_creation_active.value){let l="M"+s.x+","+s.y+"L"+event.offsetX+","+event.offsetY;this.$refs.dragline.setAttribute("d",l),this.$refs.dragline.classList.remove("hidden")}this.dragged_node.el=event.path[1],this.dragged_node.issue_statuses=s.issue_statuses},node_mouseup(e){if(!this.$refs.is_edge_creation_active.value||this.dragged_node.issue_statuses==null)return;let t=event.path[1].getAttribute("uuid"),s=this.get_node_by_uuid(t);this.dragged_node.issue_statuses[0].uuid!=s.issue_statuses[0].uuid&&this.create_edge(this.dragged_node.issue_statuses[0].uuid,s.issue_statuses[0].uuid)},svg_mousedown(e){this.dragging_all=!0,console.log("svg_mousedown")},svg_mouseup(e){this.dragging_all=!1,this.$refs.dragline.classList.add("hidden"),this.dragged_node.issue_statuses=void 0,console.log("svg_mouseup")},svg_mouseleave(e){this.$refs.dragline.classList.add("hidden"),this.dragged_node.issue_statuses=void 0,console.log("svg_mouseleave")},mouse_move(e){if(event.type=="touchmove")return;if(this.dragged_node.issue_statuses==null){if(!this.dragging_all)return;for(let s in this.wdata.workflow_nodes){let l=this.wdata.workflow_nodes[s];console.log("nn",l),l.x+=event.movementX,l.y+=event.movementY,this.$refs[tr.status_from_uuid+","+tr.status_to_uuid],l.el.setAttribute("transform","translate("+l.x+","+l.y+")")}this.update_edges();return}let t=this.get_node_by_uuid(this.dragged_node.issue_statuses[0].uuid);if(this.$refs.is_edge_creation_active.value){let s="M"+t.x+","+t.y+"L"+event.offsetX+","+event.offsetY;console.log(this.$refs.dragline),this.$refs.dragline.setAttribute("d",s)}else t.x+=event.movementX,t.y+=event.movementY,this.dragged_node.el.setAttribute("transform","translate("+t.x+","+t.y+")"),console.log("nnn",this.$store.selected_workflows),this.update_edges(this.dragged_node.issue_statuses[0].uuid)},format_node_text(e){let l="",o=e.split(/\s+/g);o.length;for(let i in o){let u=-(12*(o.length-1))/2+12*i+3;l+="<tspan x=0 y="+u+">"+o[i]+"</tspan>"}return l},create_edge(e,t){let s=this.get_node_by_uuid(e).issue_statuses[0].name,l=this.get_node_by_uuid(t).issue_statuses[0].name,o={name:s+"->"+l,uuid:h.uuidv4(),status_from_uuid:e,status_to_uuid:t,workflows_uuid:this.wdata.uuid,table_name:"transitions"};this.wdata.transitions.push(o)},create_node(){let e=this.selected_issue_statuses;if(this.get_node_by_uuid(e.uuid)!=null){console.log("status already exists");return}let t={issue_statuses:{0:e},issue_statuses_uuid:e.uuid,uuid:h.uuidv4(),workflows_uuid:this.wdata.uuid,x:this.$refs.svg_workflow.clientWidth-50,y:50,table_name:"workflow_nodes"};this.wdata.workflow_nodes.push(t)},delete_edge(e){this.wdata.transitions.splice(this.wdata.transitions.indexOf(e),1)},delete_related_edges(e){this.wdata.transitions.filter(function(s){return s.status_to_uuid==e||s.status_from_uuid==e}).map(this.delete_edge)},delete_element(){if(this.selected.node!=null){let e=this.selected.node.issue_statuses[0].uuid;this.delete_related_edges(e),this.update_edges(e),this.wdata.workflow_nodes.splice(this.wdata.workflow_nodes.indexOf(this.selected.node),1)}else this.selected.edge!=null&&this.delete_edge(this.selected.edge);this.selected={}},get_selected_name(){return this.selected.node!=null?this.selected.node.issue_statuses[0].name:this.selected.edge!=null?this.selected.edge.name:""}},props:{wdata:{type:Object,default:{}},is_edge_creation_active:{type:Boolean,default:!1},name:{type:String,default:""},dragged_node:{type:Object,default:{}},node_radius:{type:Number,default:35},arrows:{type:Array,default:()=>[{id:"end-arrow"},{id:"hover-end-arrow"},{id:"selected-end-arrow"},{id:"drag-end-arrow"}]}},watch:{wdata:{handler:function(e,t){this.$store.commit("push_update_workflows",e),console.log("wwwww",e)},deep:!0}},mounted(){this.update_edges()},updated(){this.update_edges()},beforeCreate(){console.log("iss1");let e="issue_statuses";if(!this.$store.state[e]){const t=S.create_module(e,"");console.log("iss1",t),this.$store.registerModule(e,t)}},created(){this.$store.dispatch("get_issue_statuses")},computed:{issue_statuses:function(){return this.$store.getters.get_issue_statuses},selected_issue_statuses:function(){return this.$store.getters.selected_issue_statuses}}},Rt={class:"workflows-editor"},Wt={class:"workflows-command-panel"},Ht={class:"svg-container"},Xt=["id"],Zt=a("path",{d:"M0,-5L10,0L0,5"},null,-1),zt=[Zt],Gt={class:"graph"},Qt={class:"link dragline hidden",d:"M0,0L0,0",style:{"marker-end":'url("#drag-end-arrow")'},ref:"dragline"},Yt=["name","from_uuid","to_uuid","idx"],es=["uuid","transform"],ts=["r"],ss=["innerHTML"],ns={class:"statuses-container"},os={class:"statuses-search-and-add"};function ls(e,t,s,l,o,i){const u=m("StringInput"),n=m("KButton"),d=m("BooleanInput"),r=m("KTable");return _(),f("div",Rt,[a("div",Wt,[p(u,{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430/\u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0430",id:"workflow-element-name",value:i.get_selected_name()},null,8,["value"]),p(n,{name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442",onClick:t[0]||(t[0]=c=>i.delete_element())}),p(d,{ref:"is_edge_creation_active",label:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432",id:"is-edge-creation-active",value:s.is_edge_creation_active},null,8,["value"])]),a("div",Ht,[(_(),f("svg",{class:"svg-workflow",ref:"svg_workflow",onMousemove:t[7]||(t[7]=c=>i.mouse_move(c)),onTouchmove:t[8]||(t[8]=c=>i.mouse_move(c)),onMouseup:t[9]||(t[9]=c=>i.svg_mouseup(c)),onMousedown:t[10]||(t[10]=c=>i.svg_mousedown(c)),onTouchend:t[11]||(t[11]=c=>i.svg_mouseup(c)),onMouseleave:t[12]||(t[12]=c=>i.svg_mouseleave(c))},[a("defs",null,[(_(!0),f(v,null,w(s.arrows,(c,g)=>(_(),f("marker",{key:g,id:c.id,viewBox:"0 -5 10 10",refX:"9",markerWidth:"3.5",markerHeight:"3.5",orient:"auto"},zt,8,Xt))),128))]),a("g",Gt,[a("path",Qt,null,512),a("g",null,[(_(!0),f(v,null,w(s.wdata.transitions,(c,g)=>(_(),f("path",{key:g,class:A(["link",{selected:o.selected.edge!=null&&o.selected.edge.uuid==c.uuid}]),name:c.name,from_uuid:c.status_from_uuid,to_uuid:c.status_to_uuid,idx:g,ref_for:!0,ref:c.status_from_uuid+","+c.status_to_uuid,onClick:t[1]||(t[1]=$=>i.select_edge($))},null,10,Yt))),128))]),a("g",null,[(_(!0),f(v,null,w(s.wdata.workflow_nodes,(c,g)=>(_(),f("g",{key:g,class:A(["conceptG",{selected:o.selected.node!=null&&o.selected.node.issue_statuses[0].uuid==c.issue_statuses[0].uuid}]),uuid:c.issue_statuses[0].uuid,ref_for:!0,ref:c.issue_statuses[0].uuid,transform:"translate("+c.x+","+c.y+")",onClick:t[2]||(t[2]=$=>i.select_node($)),onMousedown:t[3]||(t[3]=$=>i.node_mousedown($)),onTouchstart:t[4]||(t[4]=$=>i.node_mousedown($)),onMouseup:t[5]||(t[5]=$=>i.node_mouseup($)),onTouchend:t[6]||(t[6]=$=>i.node_mouseup($))},[a("circle",{r:s.node_radius},null,8,ts),a("text",{"text-anchor":"middle",dy:"-0",innerHTML:i.format_node_text(c.issue_statuses[0].name)},null,8,ss)],42,es))),128))])])],544)),a("div",ns,[a("div",os,[p(n,{id:"add-status-to-graph",name:"\u21B6",onClick:t[13]||(t[13]=c=>i.create_node())}),p(u,{label:"",id:"selected-issue-statuses",value:i.selected_issue_statuses.name},null,8,["value"])]),p(r,{class:"table-statuses",collumns:o.issue_statuses_collumns,"table-data":i.issue_statuses,name:"issue_statuses"},null,8,["collumns","table-data"])])])])}var is=y(Ft,[["render",ls]]);const as={props:{title:{type:String,default:"Tab"}},data(){return{isActive:!0}},computed:{selected:function(){return console.log(this.$parent.selected),this.$parent.selected}}},ds={class:"tab"};function us(e,t,s,l,o,i){return D((_(),f("div",ds,[Q(e.$slots,"default")],512)),[[G,s.title===i.selected]])}var rs=y(as,[["render",us]]);const _s={data(){return{selectedIndex:0,tabs:[],selected:""}},created(){this.tabs=this.$slots.default(),this.selected=this.tabs[0].props.title},mounted(){},methods:{select_tab(e){this.selected=e.path[0].innerHTML}}},cs={class:"tab-panel"},fs={class:"tabs__header"},ps=["onClick"];function ms(e,t,s,l,o,i){return _(),f("div",cs,[Q(e.$slots,"default"),a("ul",fs,[(_(!0),f(v,null,w(o.tabs,(u,n)=>(_(),f("li",{key:u.props.title,onClick:d=>i.select_tab(d,n),class:A({tab__selected:o.selected==u.props.title})},B(u.props.title),11,ps))),128))])])}var hs=y(_s,[["render",ms]]);const F="workflows",ne="crud",gs=S.create_module(F,ne),vs={name:"",transitions:[],workflow_nodes:[]},bs=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name"}],ys=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C workflow",func:"unselect_"+F}],$s=["name"],ws={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"}]}},As={instance:vs,collumns:bs,buttons:ys,name:F,search_collumns:$s},ks={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x,WorkflowsEditor:is,KTab:rs,KTabPanel:hs},Ss=I.create_module(F,ne,As,ks,gs,ws),Bs=Ss,xs={id:"workflows_down_panel"},Ts={id:"workflows_table_panel"},Ms={id:"workflows_card"},Ks=Y("\u0421\u0442\u0430\u0442\u0443\u0441\u044B"),js=Y("\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044F"),Is={id:"workflows_card_footer_div"},Ls={id:"workflows_card_infooter_div"};function Cs(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KTab"),r=m("WorkflowsEditor"),c=m("KTabPanel"),g=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",xs,[a("div",Ts,[p(n,{collumns:e.collumns,"table-data":e.workflows,name:"workflows"},null,8,["collumns","table-data"])]),a("div",Ms,[p(c,null,{default:O(()=>[p(d,{title:"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0435"},{default:O(()=>[(_(!0),f(v,null,w(e.inputs,($,ae)=>(_(),T(C($.type+"Input"),{label:$.label,key:ae,id:$.id,value:e.get_json_val(e.selected_workflows,$.id),parent_name:"workflows",disabled:$.disabled},null,8,["label","id","value","disabled"]))),128))]),_:1}),p(d,{title:"\u0421\u0445\u0435\u043C\u0430"},{default:O(()=>[p(r,{wdata:e.selected_workflows},null,8,["wdata"])]),_:1}),p(d,{title:"\u0421\u0442\u0430\u0442\u0443\u0441\u044B"},{default:O(()=>[Ks]),_:1}),p(d,{title:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u044F"},{default:O(()=>[js]),_:1})]),_:1}),a("div",Is,[a("div",Ls,[p(g,{id:"save_workflows_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_workflows"}),p(g,{id:"delete_workflows_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_workflows"})])])])])],64)}var Vs=y(Bs,[["render",Cs]]);const Js={data:()=>({focused:!1}),props:{disabled:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:""},id:{type:String,default:""},parent_name:{type:String,default:""},values:{type:Array,default:()=>[{name:"aaa"},{name:"bbb"},{name:"ccc"},{name:"ddd"}]}},watch:{value:function(e,t){console.log(e,t,this.id,this.parent_name);let s={};s[this.id]=e,this.$store.commit("push_update_"+this.parent_name,s)}}},Ps={class:"select"},Os={class:"label"},Ds=["disabled"],qs=["innerHTML"];function Es(e,t,s,l,o,i){return _(),f("div",Ps,[a("div",Os,B(s.label),1),D(a("input",{class:"select-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),disabled:s.disabled,onFocus:t[1]||(t[1]=u=>e.focused=!0),onBlur:t[2]||(t[2]=u=>e.focused=!1)},null,40,Ds),[[X,s.value]]),D(a("div",{class:A(["select-list",{active:e.focused}])},[a("table",null,[(_(!0),f(v,null,w(s.values,(u,n)=>(_(),f("tr",{key:n},[a("td",{innerHTML:u.name},null,8,qs)]))),128))])],2),[[G,e.focused]])])}var Ns=y(Js,[["render",Es]]);const R="issue_types",oe="crud",Us=S.create_module(R,oe),Fs={name:""},Rs=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"string"}],Ws=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u0438\u043F \u0437\u0434\u0430\u0447\u0438",func:"unselect_"+R}],Hs=["name"],Xs={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"},{label:"Workflow",id:"workflow.0.name",type:"Select"},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"Date",disabled:!0}]}},Zs={instance:Fs,collumns:Rs,buttons:Ws,name:R,search_collumns:Hs},zs={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x,SelectInput:Ns},Gs=I.create_module(R,oe,Zs,zs,Us,Xs),Qs=Gs,Ys={id:"issue_types_down_panel"},en={id:"issue_types_table_panel"},tn={id:"issue_types_card"},sn={id:"issue_types_card_footer_div"},nn={id:"issue_types_card_infooter_div"};function on(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",Ys,[a("div",en,[p(n,{collumns:e.collumns,"table-data":e.issue_types,name:"issue_types"},null,8,["collumns","table-data"])]),a("div",tn,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.get_json_val(e.selected_issue_types,r.id),parent_name:"issue_types",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",sn,[a("div",nn,[p(d,{id:"save_issue_types_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_issue_types"}),p(d,{id:"delete_issue_types_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_issue_types"})])])])])],64)}var ln=y(Qs,[["render",on]]);const W="issue_statuses",le="crud",an=S.create_module(W,le),dn=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"string"},{name:"\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439",id:"is_start",type:"boolean"},{name:"\u041A\u043E\u043D\u0435\u0447\u043D\u044B\u0439",id:"is_end",type:"boolean"},{name:"\u0441\u043E\u0437\u0434\u0430\u043D",id:"created_at",type:"date"},{name:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",id:"updated_at",type:"date"}],un=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441",func:"unselect_"+W}],rn=["name"],_n={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"},{label:"\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439",id:"is_start",type:"Boolean"},{label:"\u041A\u043E\u043D\u0435\u0447\u043D\u044B\u0439",id:"is_end",type:"Boolean"},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"Date",disabled:!0}]}},cn={collumns:dn,buttons:un,name:W,search_collumns:rn},fn={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x},pn=I.create_module(W,le,cn,fn,an,_n),mn=pn,hn={id:"issue_statuses_down_panel"},gn={id:"issue_statuses_table_panel"},vn={id:"issue_statuses_card"},bn={id:"issue_statuses_card_footer_div"},yn={id:"issue_statuses_card_infooter_div"};function $n(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",hn,[a("div",gn,[p(n,{collumns:e.collumns,"table-data":e.issue_statuses,name:"issue_statuses"},null,8,["collumns","table-data"])]),a("div",vn,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.selected_issue_statuses[r.id],parent_name:"issue_statuses",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",bn,[a("div",yn,[p(d,{id:"save_issue_statuses_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_issue_statuses"}),p(d,{id:"delete_issue_statuses_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_issue_statuses"})])])])])],64)}var wn=y(mn,[["render",$n]]);const H="issue_statuses",ie="crud",An=S.create_module(H,ie),kn=[{name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name"},{name:"\u0422\u0438\u043F",id:"type[0].name"},{name:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435",id:"is_custom",type:"boolean"},{name:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",id:"created_at",type:"date"}],Sn=[{name:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u043E\u043B\u0435",func:"unselect_"+H}],Bn=["name","short_name"],xn={inputs:{type:Array,default:()=>[{label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",id:"name",type:"String"},{label:"\u0422\u0438\u043F",id:"type[0].name",type:"String"},{label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435",id:"is_custom",type:"Boolean"},{label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043E",id:"created_at",type:"Date",disabled:!0}]}},Tn={collumns:kn,buttons:Sn,name:H,search_collumns:Bn},Mn={TopMenu:V,KTable:M,StringInput:K,BooleanInput:j,AvatarInput:J,DateInput:P,KButton:x},Kn=I.create_module(H,ie,Tn,Mn,An,xn),jn=Kn,In={id:"issue_statuses_down_panel"},Ln={id:"issue_statuses_table_panel"},Cn={id:"issue_statuses_card"},Vn={id:"issue_statuses_card_footer_div"},Jn={id:"issue_statuses_card_infooter_div"};function Pn(e,t,s,l,o,i){const u=m("TopMenu"),n=m("KTable"),d=m("KButton");return _(),f(v,null,[p(u,{buttons:e.buttons,name:e.name,collumns:e.search_collumns},null,8,["buttons","name","collumns"]),a("div",In,[a("div",Ln,[p(n,{collumns:e.collumns,"table-data":e.issue_statuses,name:"issue_statuses"},null,8,["collumns","table-data"])]),a("div",Cn,[(_(!0),f(v,null,w(e.inputs,(r,c)=>(_(),T(C(r.type+"Input"),{label:r.label,key:c,id:r.id,value:e.get_json_val(e.selected_issue_statuses,r.id),parent_name:"issue_statuses",disabled:r.disabled},null,8,["label","id","value","disabled"]))),128)),a("div",Vn,[a("div",Jn,[p(d,{id:"save_issue_statuses_btn",name:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",func:"save_issue_statuses"}),p(d,{id:"delete_issue_statuses_btn",name:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",func:"delete_issue_statuses"})])])])])],64)}var On=y(jn,[["render",Pn]]);const Dn=ue({history:re("/"),routes:[{path:"/dashboards",component:q},{path:"/favorit",component:On},{path:"/alerts",component:q},{path:"/projects",component:Ut},{path:"/configs/roles",component:q},{path:"/configs/issue_types",component:ln},{path:"/configs/workflows",component:Vs},{path:"/configs/issue_statuses",component:wn},{path:"/configs/users",component:ct},{path:"/configs/fields",component:q},{path:"/configs",component:q}]}),qn=_e();var L={delimiter_color:"rgb(71, 81, 89)",bg_color:"rgb(35, 39, 43)",color:"rgb(255, 255, 255)",hover_bg_color:"rgb(255, 255, 255)",hover_color:"rgb(35, 39, 43)"};const En={props:{isMenuOpen:{type:Boolean,default:!0},menuIcon:{type:String,default:"bx-hive"},isPaddingLeft:{type:Boolean,default:!0},menuOpenedPaddingLeftBody:{type:String,default:"250px"},menuClosedPaddingLeftBody:{type:String,default:"78px"},menuItems:{type:Array,default:()=>[{link:"/dashboards",name:"\u0414\u0430\u0448\u0431\u043E\u0440\u0434\u044B",icon:"bx-grid-alt",level:1},{link:"/favorit",name:"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435",icon:"bx-star",level:1},{link:"/alerts",name:"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",icon:"bx-envelope",level:1},{link:"/projects",name:"\u041F\u0440\u043E\u0435\u043A\u0442\u044B",icon:"bx-briefcase-alt-2",level:1},{link:"/configs",name:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",icon:"bx-cog",level:1},{link:"/configs/users",name:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",icon:"bx-user",level:2},{link:"/configs/roles",name:"\u0420\u043E\u043B\u0438",icon:"bx-group",level:2},{link:"/configs/fields",name:"\u041F\u043E\u043B\u044F",icon:"bx-bracket",level:2},{link:"/configs/issue_statuses",name:"\u0421\u0442\u0430\u0442\u0443\u0441\u044B \u0437\u0430\u0434\u0430\u0447",icon:"bx-flag",level:2},{link:"/configs/issue_types",name:"\u0422\u0438\u043F\u044B \u0437\u0430\u0434\u0430\u0447",icon:"bx-spreadsheet",level:2},{link:"/configs/workflows",name:"\u0412\u043E\u0440\u043A\u0444\u043B\u043E\u0443 \u0437\u0430\u0434\u0430\u0447",icon:"bx-sitemap",level:2}]}},data(){return{isOpened:!1}},mounted(){this.isOpened=this.isMenuOpen},computed:{cssVars(){return{"--bg-color":L.bg_color,"--logo-title-color":L.color,"--icons-color":L.color,"--menu-items-hover-color":L.hover_bg_color,"--menu-items-text-color":L.color}}},watch:{isOpened(){window.document.body.style.paddingLeft=this.isOpened&&this.isPaddingLeft?this.menuOpenedPaddingLeftBody:this.menuClosedPaddingLeftBody}}},Nn={class:"logo-details"},Un=a("div",{class:"logo_name"}," DevKTracker ",-1),Fn={class:"main-menu-list"},Rn={id:"my-scroll"},Wn={class:"nav-list",style:{overflow:"visible"}},Hn={class:"links_name"};function Xn(e,t,s,l,o,i){const u=m("router-link");return _(),f("div",{class:A(["sidebar view",o.isOpened?"open":""]),style:z(i.cssVars)},[a("div",Nn,[a("i",{class:A(["bx icon",s.menuIcon])},null,2),Un,a("i",{class:A(["bx",o.isOpened?"bx-menu-alt-right":"bx-menu"]),id:"btn",onClick:t[0]||(t[0]=n=>o.isOpened=!o.isOpened)},null,2)]),a("div",Fn,[a("div",Rn,[a("ul",Wn,[(_(!0),f(v,null,w(s.menuItems,(n,d)=>(_(),f("span",{key:d},[a("li",null,[p(u,{to:n.link,class:A("menu-item-"+n.level)},{default:O(()=>[a("i",{class:A(["bx",n.icon||"bx-square-rounded"])},null,2),a("span",Hn,B(n.name),1)]),_:2},1032,["to","class"])])]))),128))])])])],6)}var Zn=y(En,[["render",Xn]]);const zn={props:{name:{type:String,default:"\u0425\u0432\u0438\u043B\u043E\u043D \u041D\u0438\u043A\u043E\u043B\u0430\u0439"},logo_src:{type:String,default:"https://oboz.myjetbrains.com/hub/api/rest/avatar/b9b1d87d-568f-4f54-8ee3-44035e1137ff?etag=MjYtMjYwOA%3D%3D&amp;dpr=1.25&amp;size=32"}}},Gn={class:"profile"},Qn=["src"];function Yn(e,t,s,l,o,i){return _(),f("div",Gn,[a("img",{src:s.logo_src},null,8,Qn),a("div",null,B(s.name),1)])}var eo=y(zn,[["render",Yn]]);const to={components:{MainMenu:Zn,Profile:eo},computed:{cssVars(){return{"--bg-color":L.bg_color,"--ttt-color":L.color}}}};function so(e,t,s,l,o,i){const u=m("MainMenu"),n=m("router-view"),d=m("Profile");return _(),f(v,null,[p(u),p(n),p(d)],64)}var no=y(to,[["render",so]]);const Z=ce(no);Z.use(Dn);Z.use(qn);Z.mount("#app");
